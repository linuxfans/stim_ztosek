//////////////////////////////////////////////////////////////////////////
//ZtOS 处理器相关文件
//文件：ztos_cpu.h
//作者：张鑫
//日期：[11/18/2005]
//////////////////////////////////////////////////////////////////////////
#ifndef __ZTOS_CPU_H
#define __ZTOS_CPU_H


//////////////////////////////////////////////////////////////////////////
//EXTREN宏定义　防止多重定义
//////////////////////////////////////////////////////////////////////////
#ifdef	__ZTOS_CPU_C
#define	EXTERN
#else
#define EXTERN	extern
#endif

//////////////////////////////////////////////////////////////////////////
//定义编译器无关数据类型
//////////////////////////////////////////////////////////////////////////
#define	INT8	char
#define	INT16	short
#define	INT32	int

#define	UINT8	unsigned char
#define	UINT16	unsigned short
#define	UINT32	unsigned int

//////////////////////////////////////////////////////////////////////////
//定义 堆栈宽度
//////////////////////////////////////////////////////////////////////////
typedef	UINT32	OS_TSK_STK;

//////////////////////////////////////////////////////////////////////////
//声明处理器相关函数
//////////////////////////////////////////////////////////////////////////
EXTERN	OS_TSK_STK*	os_tsk_stk_init(void (*task)(void *pd),
									void *pdata, OS_TSK_STK *ptos);
EXTERN	void	os_tsk_start();

//////////////////////////////////////////////////////////////////////////
//声明相关系统函数
//  [9/7/2005]
//////////////////////////////////////////////////////////////////////////
EXTERN void SWI_Handler(int Handle) __attribute__((interrupt("SWI")));		//软中断入口
EXTERN void SWI_Interrupt(int Handle);
#define OS_TASK_SW() SWI_Interrupt(0)					//任务级任务切换函数          
#define _OSStartHighRdy() SWI_Interrupt(6)			//运行优先级最高的任务
#define OS_ENTER_CRITICAL()	SWI_Interrupt(1)			//关中断
#define OS_LEAVE_CRITICAL() SWI_Interrupt(2)			//开中断  


#undef	EXTERN
#endif
